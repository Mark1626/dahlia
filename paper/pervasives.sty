\newif\ifdraft\drafttrue
\newcount\draft\draft=1

\ifdraft
\overfullrule=1mm
\fi

\setcitestyle{numbers,sort&compress}

\usepackage{booktabs}
\usepackage{rotating}
\usepackage{lscape}
\usepackage{pdflscape}
\usepackage{subcaption}
\usepackage{cleveref}
\usepackage{xspace}
\usepackage{mathtools}
\usepackage{listings}
\usepackage{tikz}
\usepackage{wrapfig}
\usepackage{graphicx}
\usetikzlibrary{arrows}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{shapes.multipart}
\usepackage{balance}
\usepackage{xxx}
\usepackage{xspace}

\usepackage{pifont}
\newcommand{\cmark}{\ding{51}}
\newcommand{\xmark}{\ding{55}}

\def\UrlBreaks{\do\/\do-\do.}

% Define colors for comments here
\newcommand{\rn}[1]{{\color{blue}[#1 --Rachit]}}

% Fuse syntax
\lstdefinelanguage{Fuse}{
  sensitive=false,
  morekeywords={let,combine,decl,unroll,for}
}

% Listings setup
\definecolor{mygreen}{rgb}{0,0.6,0}
\lstset{ %
    keywordstyle=\ttfamily\bfseries,
    commentstyle=\ttfamily\color{mygreen},
    stringstyle=\ttfamily,
    identifierstyle=\ttfamily,
    basicstyle=\footnotesize\ttfamily, % the size of the fonts that are used for the code
    breakatwhitespace=false, % sets if automatic breaks should only happen at whitespace
    breaklines=true, % sets automatic line breaking
    captionpos=b, % sets the caption-position to bottom
    keywordstyle=\color{blue}, % keyword style
    language=Fuse, % the language of the code
    numbers=none, % where to put the line-numbers; possible values are (none, left, right)
    tabsize=2, % sets default tabsize to 2 spaces
}


%%%%
%%% Data
%%%
\newcommand{\sys}{Seashell}
\newcommand{\sysloc}{1000 LoC}

\newcommand{\sysfor}{\lstinline|for|}
\newcommand{\sysunroll}{\lstinline|unroll|}
\newcommand{\sysbank}{\lstinline|bank|}
\newcommand{\syscombine}{\lstinline|combine|}
\newcommand{\sysmem}[2]{\lstinline|mem[#1 bank #2]|}

\crefname{section}{\S}{\S\S}
\Crefname{section}{\S}{\S\S}
\crefformat{section}{\S#2#1#3}
\Crefname{figure}{Figure}{Figures}
\crefformat{figure}{Figure #2#1#3}
\Crefname{Figure}{Figure}{Figures}

\newcommand{\figsize}{\footnotesize}

% Symbols
\newcommand{\defeq}{\ensuremath{\coloneqq}}

\lstdefinestyle{figurestyle}{
  basicstyle=\fontsize{6}{6}\ttfamily,
  numbers=left,
  numberstyle=\fontsize{5}{5}\rmfamily,
  numbersep=0.4em,
  stepnumber=1,
  firstnumber=1,
  xleftmargin=1em}

\lstdefinestyle{normalstyle}{
  basicstyle=\small\ttfamily,
  numbers=none}

\newtoggle{infig}
\togglefalse{infig}
\AtBeginEnvironment{figure}{\toggletrue{infig}}
\AtEndEnvironment{figure}{\togglefalse{infig}}
\AtBeginEnvironment{figure*}{\toggletrue{infig}}
\AtEndEnvironment{figure*}{\togglefalse{infig}}

\AtBeginEnvironment{lstlisting}{
  \iftoggle{infig}{
    \lstset{style=figurestyle}
  }{
    \lstset{style=normalstyle,numbers=none}}}